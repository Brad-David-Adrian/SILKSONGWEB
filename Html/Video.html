<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Videos | Weaver's Sanctum</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../Css/Index.css">
    <style>
        body { background:#070707; color:#eee; font-family:'IM Fell English', serif; margin:0; }
        .cinzel { font-family: 'Cinzel', serif; }
        nav { z-index:100; background:rgba(10,10,10,0.95); backdrop-filter: blur(8px); border-bottom:1px solid #222; }
        .video-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)); gap:18px; }
        .video-card { background:linear-gradient(180deg,#0b0b0b,#0f0f0f); padding:12px; border:1px solid #222; border-radius:8px; }
        .video-card video { width:100%; border-radius:6px; display:block; }
        .muted-note { color:#999; font-size:13px; }
    </style>
</head>
<body>

    <nav class="position-fixed top-0 start-0 w-100 py-2">
        <div class="container-xl d-flex justify-content-between align-items-center px-3">
            <div class="cinzel fs-5 fw-bold text-[#8b1d1d]">WEAVER'S SANCTUM</div>
            <div class="d-none d-md-flex gap-3 align-items-center">
                <a href="../index.html#hero" class="nav-link">Sanctum</a>
                <a href="Map.Html" class="nav-link">Map</a>
                <a href="Video.html" class="nav-link text-warning fw-bold">Videos</a>
            </div>
        </div>
    </nav>

    <main style="padding-top:80px; padding-bottom:40px;">
        <div class="container-xl">
            <header class="mb-4">
                <h1 class="cinzel">Videos</h1>
                <p class="muted-note">This page attempts to list video files placed in the <strong>Videos</strong> folder. If your server exposes a directory index it'll auto-detect files; otherwise it falls back to common filenames.</p>
            </header>

            <section id="gallery">
                <div id="videoGrid" class="video-grid"></div>
            </section>
        </div>
    </main>

    <footer style="padding:20px 0; border-top:1px solid #111;">
        <div class="container-xl text-center text-muted">&copy; Weaver's Sanctum</div>
    </footer>

    <script>
    (function(){
        const grid = document.getElementById('videoGrid');

        // Try to fetch directory listing (works if your server shows an index)
        function tryDirectoryList(){
            return fetch('../Videos/').then(r => {
                if(!r.ok) throw new Error('no dir');
                return r.text();
            }).then(html => {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html,'text/html');
                const links = Array.from(doc.querySelectorAll('a'))
                    .map(a => a.getAttribute('href'))
                    .filter(h => /\.(mp4|webm|ogg|mov)$/i.test(h));
                return links.map(h => (h.startsWith('http')||h.startsWith('/')) ? h : '../Videos/'+h);
            });
        }

        function fallbackList(){
            return ['../Videos/sample1.mp4','../Videos/sample2.mp4','../Videos/sample3.mp4'];
        }

        function addVideo(src){
            const card = document.createElement('div');
            card.className = 'video-card';
            const v = document.createElement('video');
            v.controls = true; v.src = src; v.preload = 'metadata';
            v.addEventListener('error', ()=>{ card.style.opacity = 0.55; });
            const caption = document.createElement('div');
            caption.style.marginTop = '8px';
            caption.style.color = '#ddd';
            caption.textContent = src.split('/').pop();
            card.appendChild(v); card.appendChild(caption);
            grid.appendChild(card);
        }

        tryDirectoryList().then(list => {
            if(list && list.length) list.forEach(addVideo);
            else fallbackList().forEach(addVideo);
        }).catch(()=>{ fallbackList().forEach(addVideo); });
    })();
    </script>

</body>
</html>
